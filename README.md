# REDCap Clinical Data Pipeline (R)

ğŸ‘‹ Hi, Iâ€™m Fahmi â€” a physician working with clinical datasets, REDCap exports, and real-world data entry realities.

This repository is a **cleaned, modular re-implementation** of a real clinical data workflow:
from **messy REDCap exports** â†’ **analysis-ready datasets** â†’ **quality control checks**.

It reflects how clinical data *actually* looks in practice:
inconsistent units, repeat instruments, checkbox chaos, missing values, and human creativity ğŸ˜…

---

## ğŸ§  Why this repo exists

In many clinical and academic settings (especially external-site studies):

- REDCap exports are **long + repeated**
- Data entry is **heterogeneous**
- Downstream users want **wide, readable tables**
- QC is often *implicit* instead of *audited*

This repo shows how I:
- reshape REDCap data safely
- calibrate values **explicitly**
- preserve traceability
- prepare datasets suitable for dashboards, analysis, or database lock

---

## ğŸ“‚ Repository Structure
```
redcap-malueka
â”œâ”€â”€ R/
â”‚ â”œâ”€â”€ 01_import_merge.R # REDCap â†’ wide table (repeat instances)
â”‚ â”œâ”€â”€ 02_structure_columns.R # Column layout helpers (readability matters!)
â”‚ â”œâ”€â”€ 03_calibration_rules.R # Yes/No, numeric, checkbox sanity
â”‚ â”œâ”€â”€ 04_feature_extraction.R # Diagnosis logic, CNS classification
â”‚ â””â”€â”€ 05_qc_data_quality.R # Missingness & range QC
â”‚
â”œâ”€â”€ script/
â”‚ â”œâ”€â”€ First&Messy.R # Original monolithic script (for comparison)
â”‚ â”œâ”€â”€ make_dummy_redcap_input.R# Generate anonymized dummy REDCap data
â”‚ â””â”€â”€ run.R # End-to-end pipeline using src01â€“05
â”‚
â”œâ”€â”€ input/
â”‚ â””â”€â”€ dummy_redcap_input.xlsx # Fake data only (no real patient info)
â”‚
â”œâ”€â”€ output/
â”‚ â””â”€â”€ *.xlsx # Analysis-ready outputs
â”‚
â””â”€â”€ results/
â””â”€â”€ qc/ # QC reports
```
---

## ğŸ§ª About the dummy data

âš ï¸ **Real clinical data should NEVER be pushed to GitHub.**

The file generated by `script/make_dummy_redcap_input.R`:

- contains **fully synthetic patients**
- mimics **real REDCap structure**
- includes:
  - repeat instances
  - missing values
  - scaled numbers (e.g. `365` â†’ `36.5`)
  - checkbox fields
  - diagnosis text (brain / spine)

This allows the **entire pipeline** to run end-to-end without privacy risk.

---

## â–¶ï¸ How to run the pipeline

```r
source("script/run.R")
```

This will:
1. Import & reshape REDCap data
2. Apply calibration rules (faithful to original logic)
3. Re-order columns for human readability
4. Extract diagnosis features (brain vs spine, tumor classes)
5. Run QC checks (missingness & value ranges)
6. Export final datasets
Outputs are intentionally identical to the original script â€”
just cleaner, safer, and easier to audit.
---
## ğŸ§© Design philosophy
1. **Modular:** each file has one responsibility
2. **Explicit:** no silent coercions
3. **Readable:** for statisticians and clinicians
4. **Traceable**: transformations are visible
5. **Boring on purpose** (which is good in clinical data)
If something looks verbose, thatâ€™s intentional ğŸ™‚
---
## ğŸ“‹ Clinical Data Management context
This project aligns with real-world Clinical Data Management responsibilities, including:
- CRF lifecycle handling (import â†’ clean â†’ deliver)
- Data consistency & integrity checks
- Repeat-instrument handling
- Query-driven thinking (why is this value weird?)
- Database readiness for downstream analysis or lock
---
## ğŸ“š Related standards & knowledge areas
This repo is informed by (not a substitute for):
1. **Good Clinical Data Management Practices** (GCDMP)
2. **Good Clinical Practice** (GCP)
3. **ICH Guidelines**
4. **21 CFR Part 11** (data integrity & traceability)
---
## ğŸ§‘â€ğŸ’» Who this repo is for
Clinical Data Managers  
Biostatisticians  
Clinical researchers using REDCap  
Anyone who has ever thought:  
> â€œWhy is BMI = 234â€¦?â€  

---
## âœ¨ Final note

This is not a framework.
Itâ€™s not shiny.
Itâ€™s **how the work actually happens.**

And honestly â€” thatâ€™s the point.

If you have questions, suggestions, or want to discuss design decisions,
Iâ€™m always happy to talk data ğŸ™‚
